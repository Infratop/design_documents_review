# ER図2_レビュー
## 全体
- 入荷管理用のテーブルがない。
  > 要件に「入荷履歴を表示できること（入荷した日時、入荷した商品、個数）」がありますが、どのように実現しますか。
- 配送先テーブルがない。
  > ユーザの登録住所以外にも、配送先を複数持てるようにしてほしいです。
  > （amazonのような形式が理想です）

## 管理者
- エンドユーザとのリレーションがある。
- 商品とのリレーションがある。
  > 管理者テーブルとエンドユーザーテーブル、商品テーブルにリレーションがありますが、理由はありますか。
  > また、リレーションがあるにも関わらず、該当するFKがリレーションがありません。
  > 適切なリレーション、FKをご確認ください。

## エンドユーザ
- エンドユーザidがユーザidになっている。
  > PKがユーザーIDになっています。テーブル名が「エンドユーザ」なので、エンドユーザーIDに変更しましょう。
- 名前のカラムが足りない。
  > 名を漢字で入力するカラムがありませんので、追加しましょう。

## カートアイテム
- idがない。
  > PKが存在しません。
- 小計カラムがある(別カラムから算出可能)。
  > 小計金額カラムが存在しますが、購入時の商品の価格を保持していれば、購入枚数と合わせて算出できると思います。

## 購入
- 管理者視点の命名になっていない(→受注)。
  > テーブル名は、「受注」「注文」のような命名にしましょう。
- 購入日カラムがある。
  > 購入日カラムがあります。created_atと同日になるかと思いますが、別で持った理由はありますか。
  > （間違いではないので、理由があれば知りたいです）

## 購入詳細
- 管理者視点の命名になっていない(→受注詳細)。
  > テーブル名は、「受注詳細」「注文詳細」のような命名にしましょう。
- 購入テーブルと購入詳細テーブルのカーディナリティが逆。
  > 購入詳細テーブル：購入テーブルが1:Nとなっており、この状態ですと一つの購入商品に対して複数の支払い方法が存在する設計となりますが、適切でしょうか。
- 購入時価格を保持するカラムがない。(小計金額はある)
  > 小計金額カラムが存在しますが、購入時の商品の価格を保持していれば、購入枚数と合わせて算出できると思います。
- FKとして商品idがない。
  > 何を購入したか判別できますか。

## ジャンル
- カラムにジャンルとあるが、何が入るものか不明
  > ジャンルカラム名は、「ジャンル名」とするのが適切です。

## レーベル
- カラムにレーベルとあるが、何が入るものか不明
  > レーベルというカラム名は、「レーベル名」とするのが適切です。

## 商品
- ディスクidがある。
  > 商品テーブルとディスクテーブル間のリレーションを見ると、一ディスクに対して商品A,商品Bなどの複数商品が存在する形となっておりますが、適切でしょうか。
- 発売日カラムがない。
  > 発売日はどのように管理しますか。
- ディスク枚数カラムがあ商品リレーションから算出できる）。
  > ディスク枚数は、ディスクテーブルのデータから算出できるデータかと思いますが、このカラムを持っている理由はありますか？
- 在庫数カラムがある(入荷と売上から算出する)。
  > 在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか。
  > 例えば現在の在庫が100個あって、入荷が350個あった場合、在庫数を450と入力する運用だとすると計算ミスを誘発しやすく、実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。
  > 入荷したタイミングで入荷数を入れられるようにすれば楽です。
  > 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。
  > 入荷数の証拠にもなります。

## ディスク
- 商品とのリレーションが逆
  > 曲名テーブルとディスクテーブル間のリレーションを見ると、一曲に対してディスクA,ディスクBなどの複数ディスクが存在する形となっておりますが、適切でしょうか。
- トラックNo.の用途が不明
  > ディスクテーブルにトラックナンバーがありますが、トラックナンバーは曲ごとに付与されるものかと思います。したがって、曲を管理しているテーブルで管理すべきかと思いますので、見直してみてください。

## 曲
- ディスクとのリレーションが逆
- 曲順を管理するカラムがない。
  > 曲順はどのように管理しますか。


# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

